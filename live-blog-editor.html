<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Blog Editor | COVASOL</title>
    <meta name="robots" content="noindex,nofollow">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/variables.css">
    <link rel="stylesheet" href="assets/css/base.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/admin.css">
    <link rel="stylesheet" href="assets/css/live-editor.css">
</head>
<body class="live-editor-app" data-live-editor="blog" data-nav-current="blog">
    <!-- Sidebar Navigation -->
    <aside class="admin-sidebar">
        <div class="sidebar-brand">
            <img src="assets/img/logo.png" alt="COVASOL logo">
            <div>
                <span class="brand-caption">COVASOL</span>
                <strong>Quản trị</strong>
            </div>
        </div>
        <nav class="sidebar-nav">
            <button type="button" class="tab-btn" data-nav-key="dashboard" data-nav-path="admin.html">
                <i class="fas fa-gauge"></i>
                <span>Về trang chủ</span>
            </button>
            <button type="button" class="tab-btn" data-nav-key="blog" data-nav-path="live-blog-editor.html">
                <i class="fas fa-newspaper"></i>
                <span>Blog</span>
            </button>
            <button type="button" class="tab-btn" data-nav-key="product" data-nav-path="live-product-editor.html">
                <i class="fas fa-cubes"></i>
                <span>Sản phẩm</span>
            </button>
            <!-- <button type="button" class="tab-btn" data-nav-key="user" data-nav-path="admin-user-editor.html">
                <i class="fas fa-users"></i>
                <span>Người dùng</span>
            </button> -->
            <!-- <button type="button" class="tab-btn" data-nav-key="database" data-nav-path="database-viewer.html">
                <i class="fas fa-database"></i>
                <span>Database</span>
            </button> -->
        </nav>
        <div class="sidebar-meta">
            <button class="sidebar-action" id="liveSaveBtn">
                <i class="fas fa-save"></i>
                <span>Lưu bài viết</span>
            </button>
        </div>
    </aside>

    <!-- Main Editor Area -->
    <div class="live-editor-main">
        <!-- Top Toolbar -->
        <div class="live-editor-toolbar" id="editorToolbar">
            <div class="toolbar-section">
                <h2 class="toolbar-title">Soạn bài viết</h2>
            </div>
            <div class="toolbar-section toolbar-actions">
                <button type="button" class="toolbar-btn" data-action="insert-image" title="Chèn ảnh vào vị trí con trỏ">
                    <i class="fas fa-image"></i>
                    <span>Chèn ảnh</span>
                </button>
                <button type="button" class="toolbar-btn" data-action="insert-video" title="Chèn video vào vị trí con trỏ">
                    <i class="fas fa-video"></i>
                    <span>Chèn video</span>
                </button>
                <button type="button" class="toolbar-btn" data-action="insert-source" title="Thêm nguồn trích dẫn">
                    <i class="fas fa-link"></i>
                    <span>Thêm nguồn</span>
                </button>
            </div>
        </div>

        <!-- Split View: Editor + Preview -->
        <div class="live-editor-split">
            <!-- Left: Content Editor -->
            <div class="live-editor-pane live-editor-input">
                <div class="editor-input-wrapper">
                    <!-- Metadata Section -->
                    <section class="metadata-section">
                        <div class="meta-field meta-field-inline">
                            <label for="liveTitle">Tiêu đề</label>
                            <input type="text" id="liveTitle" placeholder="Nhập tiêu đề bài viết..." required />
                        </div>
                        <div class="meta-field meta-field-inline">
                            <label for="liveSubtitle">Phụ đề</label>
                            <input type="text" id="liveSubtitle" placeholder="Mô tả ngắn..." />
                        </div>
                        <div class="meta-grid">
                            <div class="meta-field">
                                <label for="liveCategory">Danh mục</label>
                                <input type="text" id="liveCategory" placeholder="VD: Chuyển đổi số" />
                            </div>
                            <div class="meta-field">
                                <label for="liveImageUrl">URL ảnh bìa</label>
                                <input type="url" id="liveImageUrl" placeholder="https://" />
                            </div>
                        </div>
                        <div class="meta-field">
                            <label for="liveExcerpt">Mô tả tóm tắt <span class="word-count" id="excerptWordCount">(0/60 từ)</span></label>
                            <textarea id="liveExcerpt" rows="2" placeholder="Đoạn mở đầu xuất hiện trong danh sách..." maxlength="500"></textarea>
                            <p class="editor-hint" style="font-size: 0.85rem; color: var(--gray-500); margin-top: 4px;">Giới hạn 60 từ để tối ưu SEO và hiển thị</p>
                        </div>
                        <div class="meta-grid meta-grid-3">
                            <div class="meta-field">
                                <label for="liveTags">Tags</label>
                                <input type="text" id="liveTags" placeholder="VD: IoT, AI (phân cách bằng dấu phẩy)" />
                            </div>
                            <div class="meta-field">
                                <label for="liveAuthorName">Tác giả</label>
                                <input type="text" id="liveAuthorName" placeholder="Tên tác giả" />
                            </div>
                            <div class="meta-field">
                                <label for="liveAuthorRole">Chức danh</label>
                                <input type="text" id="liveAuthorRole" placeholder="VD: Biên tập viên" />
                            </div>
                        </div>
                        <div class="meta-field meta-flag">
                            <label class="checkbox-inline">
                                <input type="checkbox" id="liveIsFeatured" />
                                <span>Đánh dấu bài viết này là nổi bật</span>
                            </label>
                            <p class="editor-hint">Chỉ 1 bài viết được gắn nổi bật. Thao tác này sẽ thay thế bài cũ.</p>
                        </div>
                    </section>

                    <!-- Content Editor -->
                    <section class="content-editor-section">
                        <div class="content-editor-header">
                            <label for="liveContentEditor">Nội dung bài viết</label>
                            <span class="editor-hint">
                                <i class="fas fa-info-circle"></i>
                                Đặt con trỏ ở đoạn muốn chèn ảnh/video, sau đó nhấn nút "Chèn ảnh" hoặc "Chèn video" trên toolbar
                            </span>
                        </div>
                        <textarea 
                            id="liveContentEditor" 
                            placeholder="Viết nội dung bài viết tại đây...&#10;&#10;Mỗi đoạn văn cách nhau bởi 1 dòng trống.&#10;&#10;Đặt con trỏ vào giữa các đoạn để chèn ảnh/video."
                            spellcheck="true"
                        ></textarea>
                    </section>
                </div>
            </div>

            <!-- Right: Live Preview -->
            <div class="live-editor-pane live-editor-preview">
                <div class="preview-header-bar">
                    <h3>
                        <i class="fas fa-eye"></i>
                        Preview trực tiếp
                    </h3>
                    <span class="preview-badge">Real-time</span>
                </div>
                <div class="preview-scroll-wrapper">
                    <article id="livePreviewPane" class="live-preview-content">
                        <div class="live-preview-placeholder">
                            <i class="fas fa-pen-to-square"></i>
                            <p>Bắt đầu nhập nội dung để xem preview</p>
                        </div>
                    </article>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/config.js"></script>
    <script src="assets/js/data-service.js"></script>
    <script src="assets/js/admin-sidebar.js"></script>
    <script src="assets/js/preview-renderers.js"></script>
    <script src="assets/js/live-editor.js"></script>
</body>
</html>
